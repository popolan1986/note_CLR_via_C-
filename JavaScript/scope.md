编译器会把一个`var a = 2`这样变量的赋值操作转换成两个动作，首先会在当前作用域中声明一个变量，然后在运行时引擎会在作用域查找该变量，如果能找到就对它赋值。

## 嵌套作用域链的规则
引擎从当前的执行作用域开始查找变量，如果找不到，就向上一级继续查找。当抵达全局作用域，查找过程停止（无论找到与否）。

如果RHS查询在所有嵌套作用域中都找不到，引擎会抛出ReferenceError。

## 词法作用域
是定义在词法阶段的作用域。词法作用域是在写代码时将变量和块作用域写在哪里来决定的。

## 块作用域
`var`不会产生块作用域。过去一个生成块作用域的方法是`try catch`。
现在可以用`let`生成块作用域。

## 闭包
函数在它本身的词法作用域以外执行。
### 例子
```js
for (var i = 0; i < 5; i++) {
    setTimeout(function timer() {
        console.log(i);
    }, i*1000);
}
```